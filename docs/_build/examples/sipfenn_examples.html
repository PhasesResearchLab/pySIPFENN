<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>pySIPFENN MGF-PSU Workshop (Feb 2023) &mdash; pySIPFENN 0.10.3 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Changelog" href="../changelog.html" />
    <link rel="prev" title="pysipfenn.modelsSIPFENN package" href="../source/pysipfenn.modelsSIPFENN.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            pySIPFENN
          </a>
              <div class="version">
                0.10.3
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../install.html">Install pySIPFENN</a></li>
<li class="toctree-l1"><a class="reference internal" href="../source/pysipfenn.html">pySIPFENN API</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">pySIPFENN MGF-PSU Workshop (Feb 2023)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#install-pysipfenn">Install pySIPFENN</a></li>
<li class="toctree-l2"><a class="reference internal" href="#starting-pysipfenn">Starting pySIPFENN</a></li>
<li class="toctree-l2"><a class="reference internal" href="#simple-run-from-directory">Simple run from directory</a></li>
<li class="toctree-l2"><a class="reference internal" href="#sigma-phase-5-sublattice-model">Sigma-Phase 5-sublattice model</a></li>
<li class="toctree-l2"><a class="reference internal" href="#run-models-utilizing-different-descriptor-feature-vector">Run models utilizing different descriptor / feature vector</a></li>
<li class="toctree-l2"><a class="reference internal" href="#add-a-new-model">Add a new model!</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference external" href="https://doi.org/10.1016/j.commatsci.2022.111254">Journal Article</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../genindex.html">Index</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">pySIPFENN</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">pySIPFENN MGF-PSU Workshop (Feb 2023)</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/PhasesResearchLab/pySIPFENN/blob/main/docs/examples/sipfenn_examples.ipynb" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="pysipfenn-mgf-psu-workshop-feb-2023">
<h1>pySIPFENN MGF-PSU Workshop (Feb 2023)<a class="headerlink" href="#pysipfenn-mgf-psu-workshop-feb-2023" title="Permalink to this heading"></a></h1>
<p>This Jupyter notebook is a brief walkthrough covering core functionalities of the <strong>pySIPFENN</strong> or <strong>py</strong>(<strong>S</strong>tructure-<strong>I</strong>nformed <strong>P</strong>rediction of <strong>F</strong>ormation <strong>E</strong>nergy using <strong>N</strong>eural <strong>N</strong>etworks) package; available through the PyPI repository. For a full up-to-date documentation, please refer to the <a class="reference external" href="https://git.pysipfenn.org">pySIPFENN GitHub repository</a> or the <a class="reference external" href="https://pysipfenn.org">pySIPFENN documentation</a>. You can also find news about our projects using SIPFENN at our <a class="reference external" href="https://phaseslab.org">Phases Research Lab</a> group website.</p>
<p><img alt="img" src="../_images/neuralnetcolorized.png" /></p>
<section id="install-pysipfenn">
<h2>Install pySIPFENN<a class="headerlink" href="#install-pysipfenn" title="Permalink to this heading"></a></h2>
<p>Installing pySIPFENN is simple and easy utilizing either <strong>PyPI</strong> package repository or cloning from <strong>GitHub</strong>.
While not required, it is recommended to first set up a virtual environment using venv or Conda. This ensures that
one of the required versions of Python (3.9+) is used and there are no dependency conflicts. If you have Conda
installed on your system ( <a class="reference external" href="https://docs.conda.io/en/latest/miniconda.html">see miniconda instructions</a> ), you can create a new environment with:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>conda create -n pysipfenn-workshop python=3.9 jupyter
conda activate pysipfenn-workshop
</pre></div>
</div>
<p>And then simply install pySIPFENN from PyPI with</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>pip install pysipfenn
</pre></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span>pip<span class="w"> </span>install<span class="w"> </span>pysipfenn
</pre></div>
</div>
</div>
</div>
<p>Alternatively, you can also install pySIPFENN in editable mode if you cloned it from GitHub like</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>git clone https://github.com/PhasesResearchLab/pySIPFENN.git
</pre></div>
</div>
<p>Or by downloading a ZIP file. Please note, this will by default download the latest development version of the
software, which may not be stable. For a stable version, you can specify a version tag after the URL with
<code class="docutils literal notranslate"><span class="pre">--branch</span> <span class="pre">&lt;tag_name&gt;</span> <span class="pre">--single-branch</span></code>.</p>
<p>Then, move to the pySIPFENN folder and install in editable (<code class="docutils literal notranslate"><span class="pre">-e</span></code>) mode</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>cd pySIPFENN
pip install -e .
</pre></div>
</div>
</section>
<section id="starting-pysipfenn">
<h2>Starting pySIPFENN<a class="headerlink" href="#starting-pysipfenn" title="Permalink to this heading"></a></h2>
<p>To utilize pySIPFENN for straightforward calculations, <strong>only the Calculator class is needed</strong>. It allows for both fetching and identification of NN models and later running of them.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pysipfenn</span>
<span class="kn">from</span> <span class="nn">pysipfenn</span> <span class="kn">import</span> <span class="n">Calculator</span>     <span class="c1"># The only thing needed for calculations</span>
</pre></div>
</div>
</div>
</div>
<p>For pretty printing we also import pretty print Python built-in library. For convenience, we also import defaultdict from collections.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>            <span class="c1"># pretty printing</span>
<span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">defaultdict</span>  <span class="c1"># convenience in the example</span>
</pre></div>
</div>
</div>
</div>
<p>Now initialize the Calculator. When run, this should display all models detected
(e.g. ✔ SIPFENN_Krajewski2020 Standard Materials Model)
and those not detected, but declared in the <em>modelsSIPFENN/models.json</em> file.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">c</span> <span class="o">=</span> <span class="n">Calculator</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>✔ SIPFENN_Krajewski2020 Standard Materials Model
✔ SIPFENN_Krajewski2020 Novel Materials Model
✔ SIPFENN_Krajewski2020 Light Model
✔ SIPFENN_Krajewski2022 KS2022 Novel Materials Model
Loading models:
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>100%|██████████| 4/4 [00:08&lt;00:00,  2.20s/it]
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>*********  PySIPFENN Successfully Initialized  **********
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
</div>
</div>
<p>In this workshop, all models were made avaialble from the start, but on your machine, if this is the first run of pySIPFENN, no models will be available. However, one can easily fetch four default (as of Feb 2023) models from Zenodo with a simple:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#c.downloadModels()</span>
<span class="c1">#c.loadModels()</span>
</pre></div>
</div>
</div>
</div>
<p>For the purpose of testing, a single model is sufficient and will be fetched faster. E.g. the lightweight model (‘SIPFENN_Krajewski2020_NN24’) can be acquired in about 1/30 of the time required to download all four.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#c.downloadModels(network=&#39;SIPFENN_Krajewski2020_NN24&#39;)</span>
<span class="c1">#c.loadModels()</span>
</pre></div>
</div>
</div>
</div>
<p>In a typical scenario, everything would work smoothly, but in some cases you may not be allowed to write into pySIPFENN package directory. Last part of this workshop will cover how to work around this limitation.</p>
</section>
<section id="simple-run-from-directory">
<h2>Simple run from directory<a class="headerlink" href="#simple-run-from-directory" title="Permalink to this heading"></a></h2>
<p>The simplest and most common usage of pySIPFENN is to deploy it on a directory/folder containing atomic structure files such as POSCAR or CIF. To of so, one simply specifies its location and which descriptor / feature vector should be used. The latter determines which ML models will be run, as they require a list of specific and ordered features as input. Furthermore, while the exact model can be specified by the user, by default all applicable models are run, as the run itself is 1-3 orders of magnitude faster than descriptor calculation.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>c.runFromDirectory(directory=&#39;myInputFiles&#39;, descriptor=&#39;KS2022&#39;)
</pre></div>
</div>
<p>In this demonstration, a set of test files shipped with pySIPFENN under <strong>directory</strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#testFilesDir = &quot;pysipfenn/tests/testCaseFiles/exampleInputFiles/&quot;</span>
</pre></div>
</div>
</div>
</div>
<p>is used. If you are using pySIPFENN in editable mode, you can simply use the above code to specify the directory. If you are using pySIPFENN from PyPI, you can use the following code to import test structures from the package.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">importlib</span> <span class="kn">import</span> <span class="n">resources</span>
<span class="n">testFilesDir</span> <span class="o">=</span> <span class="n">resources</span><span class="o">.</span><span class="n">files</span><span class="p">(</span><span class="s1">&#39;pysipfenn&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">joinpath</span><span class="p">(</span><span class="s1">&#39;tests/testCaseFiles/exampleInputFiles/&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>However, feel free to change the directory to something with your structure files. Please note that the file extension (e.g. <em>.POSCAR</em>) is required for correct import and different types (POSCAR and CIF) can be mixed. Assuming you are in the workshop directory and you put something in the myInputFiles you can run the following</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#testFilesDir = &#39;myInputFiles&#39;</span>
</pre></div>
</div>
</div>
</div>
<p>Furthermore, you can specify whether pySIPFENN should run in series or parallel <strong>calculation mode</strong>. The parallel mode is generally faster, but uses more system resources and may be slower on low-power machines with not enough CPU cores. Serial mode is also preferred if there are less than 5 calculations/worker due to multiprocessing overheads.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">c</span><span class="o">.</span><span class="n">runFromDirectory</span><span class="p">(</span><span class="n">directory</span><span class="o">=</span><span class="n">testFilesDir</span><span class="p">,</span>
                   <span class="n">descriptor</span><span class="o">=</span><span class="s1">&#39;KS2022&#39;</span><span class="p">,</span>
                   <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;serial&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Importing structures...
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>100%|██████████| 32/32 [00:00&lt;00:00, 528.58it/s]
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Models that will be run: [&#39;SIPFENN_Krajewski2022_NN30&#39;]
Calculating descriptors...
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>100%|██████████| 32/32 [00:03&lt;00:00,  8.25it/s]
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Done!
Making predictions...
Prediction rate: 560.1 pred/s
Obtained 32 predictions from:  SIPFENN_Krajewski2022_NN30
Done!
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
</div>
</div>
<p>Now, all results are obtained and stored within the <strong>c</strong> Calculator object inside a few exposed conveniently named variables
<em>predictions</em> and <em>inputFiles</em>. Also, the descriptor data is retained in <em>descriptorData</em> if needed. Let’s look up the first 3 entries. Note that the unit of prediction will depend on the model used; in this case, it is eV/atom.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pprint</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">inputFiles</span><span class="p">[:</span><span class="mi">3</span><span class="p">])</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">predictions</span><span class="p">[:</span><span class="mi">3</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;0-Cr8Fe18Ni4.POSCAR&#39;, &#39;1-Cr16Fe8Ni6.POSCAR&#39;, &#39;2-Fe8Ni22.POSCAR&#39;]
[[0.17857100069522858], [0.22403092682361603], [0.07981809228658676]]
</pre></div>
</div>
</div>
</div>
<p>For user convenience, a few methods are provided for extracting the results. E.g., if pySIPFENN has been run from structure files, the <em>get_resultDictsWithNames()</em> method is available to conveniently pass results forward in the code.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">c</span><span class="o">.</span><span class="n">get_resultDictsWithNames</span><span class="p">()[:</span><span class="mi">3</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[{&#39;name&#39;: &#39;0-Cr8Fe18Ni4.POSCAR&#39;,
  &#39;SIPFENN_Krajewski2022_NN30&#39;: 0.17857100069522858},
 {&#39;name&#39;: &#39;1-Cr16Fe8Ni6.POSCAR&#39;,
  &#39;SIPFENN_Krajewski2022_NN30&#39;: 0.22403092682361603},
 {&#39;name&#39;: &#39;2-Fe8Ni22.POSCAR&#39;,
  &#39;SIPFENN_Krajewski2022_NN30&#39;: 0.07981809228658676}]
</pre></div>
</div>
</div>
</div>
<p>Alternatively, if results are to be preserved in a spreadsheet, they can be exported into a CSV.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">c</span><span class="o">.</span><span class="n">writeResultsToCSV</span><span class="p">(</span><span class="s1">&#39;myFirstResults_pySIPFENN.csv&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="sigma-phase-5-sublattice-model">
<h2>Sigma-Phase 5-sublattice model<a class="headerlink" href="#sigma-phase-5-sublattice-model" title="Permalink to this heading"></a></h2>
<p>In the previous example we went over a set of POSCAR files in a directory without performing any non-automated manipulation. This is what authors expect will be the most common use pattern. However, pySIPFENN can be effortlessly combined with other structure analysis and manipulation software to fulfill more advanced needs. Here, as an example, we will play with a fairly complex <strong>topologically close packed (TCP) phase called Sigma</strong> possesing 5 chemically unique sites, which will be automatically identified from one configuration, like the one in figure below. Then we will look at energetics of all possible occupancies by 3 elements.</p>
<p><img alt="img" src="../_images/112-Cr12Fe10Ni8.png" /></p>
<p>For structure manipulation we will utilize pymatgen Structure. The <span class="xref myst">Spglib library</span>, accessed through pymatgen, will perform the symmetry analysis. We begin with import of appropriate modules.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pymatgen.core</span> <span class="kn">import</span> <span class="n">Structure</span>
<span class="kn">from</span> <span class="nn">pymatgen.analysis.structure_analyzer</span> <span class="kn">import</span> <span class="n">SpacegroupAnalyzer</span>
</pre></div>
</div>
</div>
</div>
<p>Next, we take any end-member of the atomic structure in question. Conveniently, one of them is already in the test case files. Then we replace all species in it with dummy ones.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">endMemberPath</span> <span class="o">=</span> <span class="n">resources</span><span class="o">.</span><span class="n">files</span><span class="p">(</span><span class="s1">&#39;pysipfenn&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">joinpath</span><span class="p">(</span><span class="s1">&#39;tests/testCaseFiles/exampleInputFiles/0-Cr8Fe18Ni4.POSCAR&#39;</span><span class="p">)</span>
<span class="n">baseStructure</span> <span class="o">=</span> <span class="n">Structure</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="n">endMemberPath</span><span class="p">)</span>
<span class="k">for</span> <span class="n">el</span> <span class="ow">in</span> <span class="nb">set</span><span class="p">(</span><span class="n">baseStructure</span><span class="o">.</span><span class="n">species</span><span class="p">):</span>
    <span class="n">baseStructure</span><span class="o">.</span><span class="n">replace_species</span><span class="p">({</span><span class="n">el</span><span class="p">:</span> <span class="s1">&#39;dummy&#39;</span><span class="p">})</span>
<span class="nb">print</span><span class="p">(</span><span class="n">baseStructure</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Full Formula (Dummy30)
Reduced Formula: Dummy
abc   :   8.547048   8.547048   4.477714
angles:  90.000000  90.000000  90.000000
pbc   :       True       True       True
Sites (30)
  #  SP              a         b         c
---  -------  --------  --------  --------
  0  Dummy0+  0.737702  0.063709  0
  1  Dummy0+  0.262298  0.936291  0
  2  Dummy0+  0.436291  0.237702  0.5
  3  Dummy0+  0.762298  0.563709  0.5
  4  Dummy0+  0.563709  0.762298  0.5
  5  Dummy0+  0.237702  0.436291  0.5
  6  Dummy0+  0.063709  0.737702  0
  7  Dummy0+  0.936291  0.262298  0
  8  Dummy0+  0         0         0
  9  Dummy0+  0.5       0.5       0.5
 10  Dummy0+  0.463029  0.129472  0
 11  Dummy0+  0.536971  0.870528  0
 12  Dummy0+  0.370528  0.963029  0.5
 13  Dummy0+  0.036971  0.629472  0.5
 14  Dummy0+  0.629472  0.036971  0.5
 15  Dummy0+  0.963029  0.370528  0.5
 16  Dummy0+  0.129472  0.463029  0
 17  Dummy0+  0.870528  0.536971  0
 18  Dummy0+  0.182718  0.182718  0.251726
 19  Dummy0+  0.817282  0.817282  0.748274
 20  Dummy0+  0.817282  0.817282  0.251726
 21  Dummy0+  0.317282  0.682718  0.751726
 22  Dummy0+  0.317282  0.682718  0.248274
 23  Dummy0+  0.182718  0.182718  0.748274
 24  Dummy0+  0.682718  0.317282  0.248274
 25  Dummy0+  0.682718  0.317282  0.751726
 26  Dummy0+  0.39991   0.39991   0
 27  Dummy0+  0.60009   0.60009   0
 28  Dummy0+  0.10009   0.89991   0.5
 29  Dummy0+  0.89991   0.10009   0.5
</pre></div>
</div>
</div>
</div>
<p>Then we use Spglib to find and group unique chemical sites in the structure and lists of their equivalents. In the case of Sigma-phase, there are 5 such sites, also called <strong>sublattices</strong>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">spgA</span> <span class="o">=</span> <span class="n">SpacegroupAnalyzer</span><span class="p">(</span><span class="n">baseStructure</span><span class="p">)</span>
<span class="n">eqAtoms</span> <span class="o">=</span> <span class="n">spgA</span><span class="o">.</span><span class="n">get_symmetry_dataset</span><span class="p">()[</span><span class="s1">&#39;equivalent_atoms&#39;</span><span class="p">]</span>
<span class="n">uniqueDict</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span>
<span class="k">for</span> <span class="n">site</span><span class="p">,</span> <span class="n">unique</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">eqAtoms</span><span class="p">):</span>
    <span class="n">uniqueDict</span><span class="p">[</span><span class="n">unique</span><span class="p">]</span> <span class="o">+=</span> <span class="p">[</span><span class="n">site</span><span class="p">]</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">uniqueDict</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>defaultdict(&lt;class &#39;list&#39;&gt;,
            {0: [0, 1, 2, 3, 4, 5, 6, 7],
             8: [8, 9],
             10: [10, 11, 12, 13, 14, 15, 16, 17],
             18: [18, 19, 20, 21, 22, 23, 24, 25],
             26: [26, 27, 28, 29]})
</pre></div>
</div>
</div>
</div>
<p>Now, with unique sites identified, we need to find all possible occupancies in the chemical system in question. Here we look at the Cr-Fe-Ni ternary. We expect 3^5=243 possible permutations with repetition.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">itertools</span> <span class="kn">import</span> <span class="n">product</span>
<span class="n">allPermutations</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">product</span><span class="p">([</span><span class="s1">&#39;Fe&#39;</span><span class="p">,</span> <span class="s1">&#39;Cr&#39;</span><span class="p">,</span> <span class="s1">&#39;Ni&#39;</span><span class="p">],</span> <span class="n">repeat</span><span class="o">=</span><span class="mi">5</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Obtained </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">allPermutations</span><span class="p">)</span><span class="si">}</span><span class="s1"> permutations of the sublattice occupancy</span><span class="se">\n</span><span class="s1">E.g.:  </span><span class="si">{</span><span class="n">allPermutations</span><span class="p">[</span><span class="mi">32</span><span class="p">]</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Obtained 243 permutations of the sublattice occupancy
E.g.:  (&#39;Fe&#39;, &#39;Cr&#39;, &#39;Fe&#39;, &#39;Cr&#39;, &#39;Ni&#39;)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">structList</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">permutation</span> <span class="ow">in</span> <span class="n">allPermutations</span><span class="p">:</span>
    <span class="n">tempStructure</span> <span class="o">=</span> <span class="n">baseStructure</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">unique</span><span class="p">,</span> <span class="n">el</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">uniqueDict</span><span class="p">,</span> <span class="n">permutation</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">site</span> <span class="ow">in</span> <span class="n">uniqueDict</span><span class="p">[</span><span class="n">unique</span><span class="p">]:</span>
            <span class="n">tempStructure</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">site</span><span class="p">,</span> <span class="n">el</span><span class="p">)</span>
    <span class="n">structList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tempStructure</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">structList</span><span class="p">[</span><span class="mi">32</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Full Formula (Cr10 Fe16 Ni4)
Reduced Formula: Cr5(Fe4Ni)2
abc   :   8.547048   8.547048   4.477714
angles:  90.000000  90.000000  90.000000
pbc   :       True       True       True
Sites (30)
  #  SP           a         b         c
---  ----  --------  --------  --------
  0  Fe    0.737702  0.063709  0
  1  Fe    0.262298  0.936291  0
  2  Fe    0.436291  0.237702  0.5
  3  Fe    0.762298  0.563709  0.5
  4  Fe    0.563709  0.762298  0.5
  5  Fe    0.237702  0.436291  0.5
  6  Fe    0.063709  0.737702  0
  7  Fe    0.936291  0.262298  0
  8  Cr    0         0         0
  9  Cr    0.5       0.5       0.5
 10  Fe    0.463029  0.129472  0
 11  Fe    0.536971  0.870528  0
 12  Fe    0.370528  0.963029  0.5
 13  Fe    0.036971  0.629472  0.5
 14  Fe    0.629472  0.036971  0.5
 15  Fe    0.963029  0.370528  0.5
 16  Fe    0.129472  0.463029  0
 17  Fe    0.870528  0.536971  0
 18  Cr    0.182718  0.182718  0.251726
 19  Cr    0.817282  0.817282  0.748274
 20  Cr    0.817282  0.817282  0.251726
 21  Cr    0.317282  0.682718  0.751726
 22  Cr    0.317282  0.682718  0.248274
 23  Cr    0.182718  0.182718  0.748274
 24  Cr    0.682718  0.317282  0.248274
 25  Cr    0.682718  0.317282  0.751726
 26  Ni    0.39991   0.39991   0
 27  Ni    0.60009   0.60009   0
 28  Ni    0.10009   0.89991   0.5
 29  Ni    0.89991   0.10009   0.5
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">c</span> <span class="o">=</span> <span class="n">Calculator</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>✔ SIPFENN_Krajewski2020 Standard Materials Model
✔ SIPFENN_Krajewski2020 Novel Materials Model
✔ SIPFENN_Krajewski2020 Light Model
✔ SIPFENN_Krajewski2022 KS2022 Novel Materials Model
Loading models:
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>100%|██████████| 4/4 [00:08&lt;00:00,  2.18s/it]
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>*********  PySIPFENN Successfully Initialized  **********
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">predictions1</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">runModels</span><span class="p">(</span><span class="n">structList</span><span class="o">=</span><span class="n">structList</span><span class="p">,</span> <span class="n">descriptor</span><span class="o">=</span><span class="s1">&#39;KS2022&#39;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;parallel&#39;</span><span class="p">,</span> <span class="n">max_workers</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">predictions1</span><span class="p">[:</span><span class="mi">3</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Models that will be run: [&#39;SIPFENN_Krajewski2022_NN30&#39;]
Calculating descriptors...
</pre></div>
</div>
<script type="application/vnd.jupyter.widget-view+json">{"version_major": 2, "version_minor": 0, "model_id": "085a4a6971bf4e5481b0d9653c3bcf9a"}</script><div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Done!
Making predictions...
Prediction rate: 1580.7 pred/s
Obtained 243 predictions from:  SIPFENN_Krajewski2022_NN30
[[0.17875529825687408], [0.16407020390033722], [0.204591765999794]]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">results1</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">get_resultDicts</span><span class="p">()</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">results1</span><span class="p">[:</span><span class="mi">3</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[{&#39;SIPFENN_Krajewski2022_NN30&#39;: 0.17875529825687408},
 {&#39;SIPFENN_Krajewski2022_NN30&#39;: 0.16407020390033722},
 {&#39;SIPFENN_Krajewski2022_NN30&#39;: 0.204591765999794}]
</pre></div>
</div>
</div>
</div>
</section>
<section id="run-models-utilizing-different-descriptor-feature-vector">
<h2>Run models utilizing different descriptor / feature vector<a class="headerlink" href="#run-models-utilizing-different-descriptor-feature-vector" title="Permalink to this heading"></a></h2>
<p>As alluded to before, pySIPFENN is built to enable rapid deployment of models based around single feature vector (or a subset of it) as descriptor calculation is by far the most costly component of structure-informed ML. However, the same feature vector cannot always be used and another one is required. There are generally three reasons for that:</p>
<ul class="simple">
<li><p>The feature calculations are too slow / computationally expensive to be deployed on large scale (e.g. for 1,000,000 structures).</p></li>
<li><p>The descriptor does not include all the information needed to predict the property of interest well, or does not incorporate some dimension of the problem that is important for the prediction, e.g. the magnetic state or the volume.</p></li>
<li><p>We want to use a specific model that was trained on a different descriptor and retraining it is not feasible.</p></li>
</ul>
<p>In this part of the tutorial, we combine previous predictions with a models based on a different descriptor (Ward2017) used in the original SIPFENN paper and run 3 models trained on it. Notably, the KS2022 we already calcualted is an optimized subset of it, giving similar performance at a fraction of the cost.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">predictions2</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">runModels</span><span class="p">(</span><span class="n">structList</span><span class="o">=</span><span class="n">structList</span><span class="p">,</span> <span class="n">descriptor</span><span class="o">=</span><span class="s1">&#39;Ward2017&#39;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;parallel&#39;</span><span class="p">,</span> <span class="n">max_workers</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">predictions2</span><span class="p">[:</span><span class="mi">3</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Models that will be run: [&#39;SIPFENN_Krajewski2020_NN9&#39;, &#39;SIPFENN_Krajewski2020_NN20&#39;, &#39;SIPFENN_Krajewski2020_NN24&#39;]
Calculating descriptors...
</pre></div>
</div>
<script type="application/vnd.jupyter.widget-view+json">{"version_major": 2, "version_minor": 0, "model_id": "e779865db24c423697acdba9a2727eb3"}</script><div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Done!
Making predictions...
Prediction rate: 750.1 pred/s
Obtained 243 predictions from:  SIPFENN_Krajewski2020_NN9
Prediction rate: 738.6 pred/s
Obtained 243 predictions from:  SIPFENN_Krajewski2020_NN20
Prediction rate: 4671.3 pred/s
Obtained 243 predictions from:  SIPFENN_Krajewski2020_NN24
[[0.07845475524663925, 0.07977379858493805, 0.03619053587317467],
 [0.06124945729970932, -0.011681255884468555, 0.05775585398077965],
 [0.05984892696142197, 0.06342118978500366, 0.07474067807197571]]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">results2</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">get_resultDicts</span><span class="p">()</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">results2</span><span class="p">[:</span><span class="mi">2</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[{&#39;SIPFENN_Krajewski2020_NN20&#39;: 0.07977379858493805,
  &#39;SIPFENN_Krajewski2020_NN24&#39;: 0.03619053587317467,
  &#39;SIPFENN_Krajewski2020_NN9&#39;: 0.07845475524663925},
 {&#39;SIPFENN_Krajewski2020_NN20&#39;: -0.011681255884468555,
  &#39;SIPFENN_Krajewski2020_NN24&#39;: 0.05775585398077965,
  &#39;SIPFENN_Krajewski2020_NN9&#39;: 0.06124945729970932}]
</pre></div>
</div>
</div>
</div>
<p>And finally combine two list of result dictionaries together.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">resultsCombined</span> <span class="o">=</span> <span class="p">[</span><span class="n">res1</span> <span class="o">|</span> <span class="n">res2</span> <span class="k">for</span> <span class="n">res1</span><span class="p">,</span> <span class="n">res2</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">results1</span><span class="p">,</span> <span class="n">results2</span><span class="p">)]</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">resultsCombined</span><span class="p">[:</span><span class="mi">2</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[{&#39;SIPFENN_Krajewski2020_NN20&#39;: 0.07977379858493805,
  &#39;SIPFENN_Krajewski2020_NN24&#39;: 0.03619053587317467,
  &#39;SIPFENN_Krajewski2020_NN9&#39;: 0.07845475524663925,
  &#39;SIPFENN_Krajewski2022_NN30&#39;: 0.17875529825687408},
 {&#39;SIPFENN_Krajewski2020_NN20&#39;: -0.011681255884468555,
  &#39;SIPFENN_Krajewski2020_NN24&#39;: 0.05775585398077965,
  &#39;SIPFENN_Krajewski2020_NN9&#39;: 0.06124945729970932,
  &#39;SIPFENN_Krajewski2022_NN30&#39;: 0.16407020390033722}]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">resultsCombinedLabeled</span> <span class="o">=</span> <span class="p">[{</span><span class="s1">&#39;configuration&#39;</span><span class="p">:</span> <span class="s1">&#39;-&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">permutation</span><span class="p">)}</span> <span class="o">|</span> <span class="n">result</span> <span class="k">for</span>
                          <span class="n">result</span><span class="p">,</span> <span class="n">permutation</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">resultsCombined</span><span class="p">,</span> <span class="n">allPermutations</span><span class="p">)]</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">resultsCombinedLabeled</span><span class="p">[</span><span class="mi">31</span><span class="p">:</span><span class="mi">33</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[{&#39;SIPFENN_Krajewski2020_NN20&#39;: 0.10104316473007202,
  &#39;SIPFENN_Krajewski2020_NN24&#39;: 0.1215638816356659,
  &#39;SIPFENN_Krajewski2020_NN9&#39;: 0.1040281280875206,
  &#39;SIPFENN_Krajewski2022_NN30&#39;: 0.24544532597064972,
  &#39;configuration&#39;: &#39;Fe-Cr-Fe-Cr-Cr&#39;},
 {&#39;SIPFENN_Krajewski2020_NN20&#39;: 0.07383379340171814,
  &#39;SIPFENN_Krajewski2020_NN24&#39;: 0.05895509943366051,
  &#39;SIPFENN_Krajewski2020_NN9&#39;: 0.06879016011953354,
  &#39;SIPFENN_Krajewski2022_NN30&#39;: 0.19040270149707794,
  &#39;configuration&#39;: &#39;Fe-Cr-Fe-Cr-Ni&#39;}]
</pre></div>
</div>
</div>
</div>
<p>Lastly, we can compare our results with the DFT reference data from the original paper. This was done in the SIPFENN paper <a class="reference external" href="https://doi.org/10.1016/j.commatsci.2022.111254">doi.org/10.1016/j.commatsci.2022.111254</a> for the 3 models based on Ward2017. The NN30 is not optimized and is not plotted here.</p>
<p><img alt="img" src="../_images/SigmaSQS_plots.png" /></p>
</section>
<section id="add-a-new-model">
<h2>Add a new model!<a class="headerlink" href="#add-a-new-model" title="Permalink to this heading"></a></h2>
<p>Adding a new model that accepts one of the descriptors / feature vectors implemented in pySIPFENN is very easy! No matter if it is a re-trained model to fit a specific set of species, or entirely new architecture. It doesn’t even need to be created in PyTorch, as pySIPFENN imports ONNX format which can be the export target of almost all ML frameworks. For instance, models presented here were created in MxNet.</p>
<p>To add your model, you just need to put it in the <strong>modelsSIPFENN directory</strong> in the pySIPFENN location and add a brief definition to the <strong>models.json file</strong>, with field name matching model file name, descriptive name, and specify which descriptor has been used. E.g.,:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>  &quot;SIPFENN_MyFunNet2023_NiSup&quot;: {
    &quot;name&quot;: &quot;SIPFENN_Krajewski2022_NN30 re-optimized for Ni-superalloys&quot;,
    &quot;descriptor&quot;: &quot;KS2022&quot;,
    &quot;note&quot;: &quot;This is my new favorite model optimized for intermetallics in the Ni-based superalloys&quot;
  }
</pre></div>
</div>
<p>Then, you can just re-initialize the Calculator and everything should be loaded automatically!</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#c = Calculator()</span>
</pre></div>
</div>
</div>
</div>
<p>Alternatively, like in the case of this workshop or some HPCs, you may not have direct write access to the pySIPFENN installation. In that case, you can add a model in your user directory and load it manually. To show that, we now copy one of pySIPFENN models to our working directory and re-name it to our liking (‘SIPFENN_MyFunNet2023_NiSup’).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">shutil</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">resources</span><span class="o">.</span><span class="n">files</span><span class="p">(</span><span class="s1">&#39;pysipfenn&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">joinpath</span><span class="p">(</span><span class="s1">&#39;modelsSIPFENN/SIPFENN_Krajewski2022_NN30.onnx&#39;</span><span class="p">),</span> <span class="s1">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">modelForTest</span><span class="p">:</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;SIPFENN_MyFunNet2023_NiSup.onnx&#39;</span><span class="p">,</span> <span class="s1">&#39;wb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">modelForTestCopy</span><span class="p">:</span>
        <span class="n">shutil</span><span class="o">.</span><span class="n">copyfileobj</span><span class="p">(</span><span class="n">modelForTest</span><span class="p">,</span> <span class="n">modelForTestCopy</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>And then load it manually.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">c</span><span class="o">.</span><span class="n">loadModelCustom</span><span class="p">(</span><span class="n">networkName</span><span class="o">=</span><span class="s1">&#39;SIPFENN_MyFunNet2023_NiSup&#39;</span><span class="p">,</span>
                  <span class="n">modelName</span><span class="o">=</span><span class="s1">&#39;SIPFENN_Krajewski2022_NN30 re-optimized for Ni-superalloys&#39;</span><span class="p">,</span>
                  <span class="n">descriptor</span><span class="o">=</span><span class="s1">&#39;KS2022&#39;</span><span class="p">,</span>
                  <span class="n">modelDirectory</span><span class="o">=</span><span class="s1">&#39;.&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Loaded model SIPFENN_Krajewski2022_NN30 re-optimized for Ni-superalloys (SIPFENN_MyFunNet2023_NiSup) from .
</pre></div>
</div>
</div>
</div>
<p>And then simply run everything as before.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">predictions3</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">runModels</span><span class="p">(</span><span class="n">structList</span><span class="o">=</span><span class="n">structList</span><span class="p">,</span> <span class="n">descriptor</span><span class="o">=</span><span class="s1">&#39;KS2022&#39;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;parallel&#39;</span><span class="p">,</span> <span class="n">max_workers</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span>
<span class="n">results3</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">get_resultDicts</span><span class="p">()</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">results3</span><span class="p">[:</span><span class="mi">2</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Models that will be run: [&#39;SIPFENN_Krajewski2022_NN30&#39;, &#39;SIPFENN_MyFunNet2023_NiSup&#39;]
Calculating descriptors...
</pre></div>
</div>
<script type="application/vnd.jupyter.widget-view+json">{"version_major": 2, "version_minor": 0, "model_id": "2078f05e444b49e39d7816606f9ad117"}</script><div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Done!
Making predictions...
Prediction rate: 1545.1 pred/s
Obtained 243 predictions from:  SIPFENN_Krajewski2022_NN30
Prediction rate: 1660.2 pred/s
Obtained 243 predictions from:  SIPFENN_MyFunNet2023_NiSup
[{&#39;SIPFENN_Krajewski2022_NN30&#39;: 0.17875529825687408,
  &#39;SIPFENN_MyFunNet2023_NiSup&#39;: 0.17875529825687408},
 {&#39;SIPFENN_Krajewski2022_NN30&#39;: 0.16407020390033722,
  &#39;SIPFENN_MyFunNet2023_NiSup&#39;: 0.16407020390033722}]
</pre></div>
</div>
</div>
</div>
<p>Lastly, append our new results to the previous ones!</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">resultsFull</span> <span class="o">=</span> <span class="p">[</span><span class="n">res12</span> <span class="o">|</span> <span class="n">res3</span> <span class="k">for</span> <span class="n">res12</span><span class="p">,</span> <span class="n">res3</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">resultsCombinedLabeled</span><span class="p">,</span> <span class="n">results3</span><span class="p">)]</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">resultsFull</span><span class="p">[:</span><span class="mi">2</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[{&#39;SIPFENN_Krajewski2020_NN20&#39;: 0.07977379858493805,
  &#39;SIPFENN_Krajewski2020_NN24&#39;: 0.03619053587317467,
  &#39;SIPFENN_Krajewski2020_NN9&#39;: 0.07845475524663925,
  &#39;SIPFENN_Krajewski2022_NN30&#39;: 0.17875529825687408,
  &#39;SIPFENN_MyFunNet2023_NiSup&#39;: 0.17875529825687408,
  &#39;configuration&#39;: &#39;Fe-Fe-Fe-Fe-Fe&#39;},
 {&#39;SIPFENN_Krajewski2020_NN20&#39;: -0.011681255884468555,
  &#39;SIPFENN_Krajewski2020_NN24&#39;: 0.05775585398077965,
  &#39;SIPFENN_Krajewski2020_NN9&#39;: 0.06124945729970932,
  &#39;SIPFENN_Krajewski2022_NN30&#39;: 0.16407020390033722,
  &#39;SIPFENN_MyFunNet2023_NiSup&#39;: 0.16407020390033722,
  &#39;configuration&#39;: &#39;Fe-Fe-Fe-Fe-Cr&#39;}]
</pre></div>
</div>
</div>
</div>
<p><strong>Great job! You have successfully completed the workshop!</strong>
Thank you for your attention! If you are following it in synchronous fashion, we will now head to Q&amp;A session. If you are viewing it in your own time and have some questions, please feel free to reach out to <span class="xref myst">Adam M. Krajewski (ak&#64;psu.edu)</span> or <span class="xref myst">Zi-Kui Liu (zxl15&#64;psu.edu)</span>!</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../source/pysipfenn.modelsSIPFENN.html" class="btn btn-neutral float-left" title="pysipfenn.modelsSIPFENN package" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../changelog.html" class="btn btn-neutral float-right" title="Changelog" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Adam M. Krajewski.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>